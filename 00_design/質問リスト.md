# 評価テーブル追加に関する質問リスト

## 概要
データベースに以下の2つのテーブルを追加する際の確認事項です：
- `evaluation_result_table`: 評価結果テーブル
- `evaluation_data_table`: 評価データテーブル

## 1. データ型について

### 1.1 true_positiveフィールド
- **提案**: `REAL`型（0.0〜1.0の範囲の正解率）
- **質問**: このデータ型で問題ないでしょうか？
- **代替案**: `TEXT`型（パーセンテージ表記）、`INTEGER`型（0-100の整数）
- 回答：OKです。

### 1.2 false_positiveフィールド
- **現状**: 実装中のため空欄
- **質問**: 将来的にどのような値が入る予定でしょうか？
- **選択肢**: 
  - 数値（0.0〜1.0の範囲）
  - パーセンテージ
  - その他の形式
- 回答：1時間当たりの過検知数[回/h]を記載予定です。0.0~上限なしの実数としてください。

## 2. 関係性について

### 2.1 evaluation_result_table.algorithm_ID
- **質問**: これは特定のアルゴリズムの評価結果を表すということでしょうか？
- **確認事項**: 1つのアルゴリズムに対して複数の評価結果が存在する可能性はありますか？
- 回答：database.db内のalgorithm_tableのIDと同じです。

### 2.2 evaluation_data_table.algorithm_output_ID
- **質問**: 個別のアルゴリズム出力に対する評価データということでしょうか？
- **確認事項**: 1つのアルゴリズム出力に対して複数の評価データが存在する可能性はありますか？
- 回答：database.db内のcore_lib_output_tableのIDと同じです。

## 3. パス管理について

### 3.1 相対パス
- **提案**: database.dbからの相対パスで記録
- **質問**: 現在の設計思想に従って実装するという理解で正しいでしょうか？
- 回答：OKです。

### 3.2 パス形式の統一
- **提案**: `pathlib.Path`を使用して自動処理
- **質問**: Windows環境（`\`）とLinux環境（`/`）のパス区切り文字統一はこの方法でよろしいでしょうか？
- 回答：OKです。

## 4. 制約について

### 4.1 NULL制約
- **質問**: `false_positive`以外のフィールドはNOT NULL制約を設けるべきでしょうか？
- **対象フィールド**: 
  - `evaluation_result_table`: version, algorithm_ID, true_positive, evaluation_result_dir
  - `evaluation_data_table`: evaluation_result_ID, algorithm_output_ID, correct_task_num, total_task_num, evaluation_data_path
- 回答：今は空欄ですが、将来的には記載予定です。NULLも許容してください。

### 4.2 外部キー制約
- **提案**: `ON DELETE RESTRICT`（参照データの削除を防止）
- **質問**: この削除時の動作でよろしいでしょうか？
- 回答：OKです。

## 5. インデックスについて

### 5.1 検索効率
- **提案**: 頻繁に検索されるフィールドにインデックスを作成
- **対象フィールド**: 
  - `version`
  - `algorithm_ID`
  - `evaluation_result_ID`
- **質問**: これらのインデックス作成は必要でしょうか？
- 回答：いったん作りをシンプルにするため、無しです。

## 6. 追加のフィールドについて

### 6.1 評価日時
- **提案**: `evaluation_timestamp`フィールドを追加
- **質問**: 評価が実行された日時を記録するフィールドは必要でしょうか？
- 回答：OKです。

### 6.2 評価者/実行環境
- **提案**: 評価を実行した環境やユーザー情報を記録するフィールド
- **質問**: これらの情報は記録する必要がありますか？
- 回答：いったん記載しないです。

## 7. その他の確認事項

### 7.1 データ整合性
- **質問**: `correct_task_num <= total_task_num`の制約は必要でしょうか？
- 回答：OKです。

### 7.2 バージョン管理
- **質問**: 評価エンジンのバージョン履歴は必要でしょうか？（自己参照テーブル化）
- 回答：不要です。

### 7.3 評価メトリクス
- **質問**: 将来的に他の評価指標（precision, recall, F1-score等）を追加する予定はありますか？
- 回答：あります。

---

## 回答待ち
上記の質問事項について、ご回答をお待ちしております。
回答をいただけましたら、詳細な実装仕様書とSQLスキーマの更新版を作成いたします。
